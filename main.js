"use strict";var C=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var H=Object.prototype.hasOwnProperty;var R=(n,s)=>{for(var t in s)C(n,t,{get:s[t],enumerable:!0})},_=(n,s,t,e)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of q(s))!H.call(n,o)&&o!==t&&C(n,o,{get:()=>s[o],enumerable:!(e=D(s,o))||e.enumerable});return n};var Q=n=>_(C({},"__esModule",{value:!0}),n);var rt={};R(rt,{default:()=>v});module.exports=Q(rt);var c=require("obsidian");var m=require("obsidian"),x={csrftoken:"",leetcodeSession:"",targetFolder:"",filenameTemplate:"{{number}}-{{slug}}",includeDescription:!0,insertAllSolutions:!1,language:"en"},h=class extends m.PluginSettingTab{constructor(s,t){super(s,t),this.plugin=t}display(){let{containerEl:s}=this;s.empty(),s.createEl("h2",{text:"LeetCode Template"}),new m.Setting(s).setName("csrftoken").setDesc("Cookie value csrftoken from leetcode.com.").addText(t=>t.setPlaceholder("csrftoken=...").setValue(this.plugin.settings.csrftoken).onChange(async e=>{this.plugin.settings.csrftoken=e.trim(),await this.plugin.saveSettings()})),new m.Setting(s).setName("LEETCODE_SESSION").setDesc("Cookie value LEETCODE_SESSION from leetcode.com.").addText(t=>t.setPlaceholder("LEETCODE_SESSION=...").setValue(this.plugin.settings.leetcodeSession).onChange(async e=>{this.plugin.settings.leetcodeSession=e.trim(),await this.plugin.saveSettings()})),new m.Setting(s).setName("Notes folder").setDesc("Target folder for generated notes (can be empty).").addText(t=>t.setPlaceholder("LeetCode").setValue(this.plugin.settings.targetFolder).onChange(async e=>{this.plugin.settings.targetFolder=e.trim(),await this.plugin.saveSettings()})),new m.Setting(s).setName("Filename template").setDesc("Placeholders: {{number}}, {{slug}}, {{title}}.").addText(t=>t.setPlaceholder("{{number}}-{{slug}}").setValue(this.plugin.settings.filenameTemplate).onChange(async e=>{this.plugin.settings.filenameTemplate=e.trim()||"{{number}}-{{slug}}",await this.plugin.saveSettings()})),new m.Setting(s).setName("Include description").setDesc("Turn off to skip task description in the note.").addToggle(t=>t.setValue(this.plugin.settings.includeDescription).onChange(async e=>{this.plugin.settings.includeDescription=e,await this.plugin.saveSettings()})),new m.Setting(s).setName("Insert all solutions").setDesc("If enabled, add all Accepted solutions (deduplicated).").addToggle(t=>t.setValue(this.plugin.settings.insertAllSolutions).onChange(async e=>{this.plugin.settings.insertAllSolutions=e,await this.plugin.saveSettings()})),new m.Setting(s).setName("Language").setDesc("UI language for plugin texts and template (en/ru).").addDropdown(t=>t.addOption("en","English").addOption("ru","\u0420\u0443\u0441\u0441\u043A\u0438\u0439").setValue(this.plugin.settings.language).onChange(async e=>{this.plugin.settings.language=e||"en",await this.plugin.saveSettings()}))}};var P=require("obsidian"),L={en:{descriptionHeader:"Description",myIdeaHeader:"My idea",myIdeaPlaceholder:"(your plan)",optimalSolutionHeader:"Optimal solution",optimalSolutionPlaceholder:"(notes)",similarHeader:"Similar questions",solutionsHeader:"Solutions",descriptionUnavailable:"(description unavailable or disabled)"},ru:{descriptionHeader:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",myIdeaHeader:"\u041C\u043E\u044F \u0438\u0434\u0435\u044F",myIdeaPlaceholder:"(\u0432\u0430\u0448 \u043F\u043B\u0430\u043D)",optimalSolutionHeader:"\u041E\u043F\u0442\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435",optimalSolutionPlaceholder:"(\u043A\u043E\u043D\u0441\u043F\u0435\u043A\u0442)",similarHeader:"\u041F\u043E\u0445\u043E\u0436\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B",solutionsHeader:"\u0420\u0435\u0448\u0435\u043D\u0438\u044F",descriptionUnavailable:"(\u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u0438\u043B\u0438 \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E)"}};function j(n="en"){return L[n]??L.en}var S={en:"Solutions",ru:"\u0420\u0435\u0448\u0435\u043D\u0438\u044F"};function T(n,s,t,e="en"){let o=j(e),a=n.tags?.length?n.tags.join(", "):"",i=`https://leetcode.com/problems/${n.slug}/`,r=["---",`title: ${n.title}`,`number: ${n.number??""}`,`difficulty: ${n.difficulty}`,`tags: [${a}]`,`link: ${i}`,"---"].join(`
`),u=s&&n.content?z((0,P.htmlToMarkdown)(n.content).trim()):o.descriptionUnavailable,l=[r,`# ${n.title}`,"",`## ${o.descriptionHeader}`,u,"",`## ${o.myIdeaHeader}`,o.myIdeaPlaceholder,"",`## ${o.optimalSolutionHeader}`,o.optimalSolutionPlaceholder,""];if(n.similarQuestions.length>0){let f=n.similarQuestions.map(g=>`- ${g.title} (${g.difficulty||"?"}) \u2014 https://leetcode.com/problems/${g.slug}/`).join(`
`);l.push(`## ${o.similarHeader}`,f,"")}let d=Array.isArray(t)?t:t?[t]:[];return d.length>0&&l.push(b(d,{language:e})),l.join(`
`)}function b(n,s={}){let{includeHeader:t=!0,language:e="en"}=s,o=J(n);if(o.length===0)return"";let a=o.map(U);return t?[`## ${S[e]??S.en}`,a.join(`

`)].join(`

`):a.join(`

`)}function U(n){let s=n.lang?n.lang.toLowerCase():"",t=n.code.trimEnd(),e=[];n.lang&&e.push(n.lang);let o=M(n.runtime);o&&e.push(`Runtime: ${o}`);let a=B(n.memory);a&&e.push(`Memory: ${a}`);let i=n.timestamp?new Date(n.timestamp*1e3):null;i&&e.push(i.toISOString());let r=e.join(" \xB7 ");return`${r?`${r}

`:""}\`\`\`${s}
${t}
\`\`\``}function M(n){let s=String(n??"").trim();if(!s)return"";let t=s.match(/([0-9]+(?:\.[0-9]+)?)\s*(ms|milliseconds?|s|sec|seconds?)?/i);if(!t)return s;let e=parseFloat(t[1]??""),a=(t[2]??"").toLowerCase();if(Number.isNaN(e))return s;let i=e;return a.startsWith("s")&&(i=e*1e3),`${i>=10?Math.round(i):parseFloat(i.toFixed(2))} ms`}function B(n){let s=String(n??"").trim();if(!s)return"";let t=s.match(/([0-9]+(?:\.[0-9]+)?)\s*(b|bytes?|kb|mb|gb)?/i);if(!t)return s;let e=parseFloat(t[1]??""),o=t[2],a=o?o.toLowerCase():"";if(Number.isNaN(e))return s;let i;switch(a){case"b":case"byte":case"bytes":i=e/(1024*1024);break;case"kb":i=e/1024;break;case"gb":i=e*1024;break;case"mb":i=e;break;default:e>1e6?i=e/(1024*1024):e>1e4?i=e/1024:i=e}return`${parseFloat(i.toFixed(2))} MB`}function z(n){let s=n.split(`
`),t=[],e=!1,o=r=>r.trim().replace(/^[-*>+\s]+/,"").replace(/^\*\*/,"").replace(/\*\*$/,""),a=r=>/^(Input|Output|Explanation)\s*:/i.test(o(r)),i=r=>/^Example\b/i.test(o(r));for(let r of s){if(a(r)){e||(t.push("```"),e=!0),t.push(r.trim());continue}if(e&&(t.push("```"),e=!1,r.trim()==="")){t.push("");continue}if(i(r)){t.push(r);continue}t.push(r)}return e&&t.push("```"),t.join(`
`)}function J(n){let s=new Set,t=[];for(let e of n){let o=e.code.trim();s.has(o)||(s.add(o),t.push({...e,code:o}))}return t}var p=require("obsidian"),V=`
  query questionData($titleSlug: String!) {
    question(titleSlug: $titleSlug) {
      questionId
      questionFrontendId
      title
      titleSlug
      difficulty
      content
      similarQuestions
      topicTags {
        name
        slug
      }
    }
  }
`,G=`
  query submissionList($offset: Int!, $limit: Int!, $questionSlug: String!) {
    questionSubmissionList(offset: $offset, limit: $limit, questionSlug: $questionSlug) {
      submissions {
        id
        statusDisplay
        lang
        runtime
        memory
        timestamp
      }
    }
  }
`,Y=`
  query submissionDetails($submissionId: Int!) {
    submissionDetails(submissionId: $submissionId) {
      id
      code
      lang {
        name
        verboseName
      }
      runtime
      runtimeDisplay
      memory
      memoryDisplay
      timestamp
    }
  }
`;async function I(n,s){let t=w({titleSlug:n,cookie:s}),e={url:"https://leetcode.com/graphql",method:"POST",body:JSON.stringify({query:V,variables:{titleSlug:n}}),headers:t,throw:!1},o=await(0,p.requestUrl)(e);if(o.status!==200)throw new Error(`LeetCode \u0432\u0435\u0440\u043D\u0443\u043B \u0441\u0442\u0430\u0442\u0443\u0441 ${o.status}`);let i=(o.json??JSON.parse(o.text))?.data?.question;if(!i)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 (\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E, \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0439 cookie)");let r=i.topicTags?.map(u=>u?.name).filter(Boolean)??[];return{id:i.questionId??void 0,number:i.questionFrontendId??i.questionId??void 0,title:i.title??n,slug:i.titleSlug??n,difficulty:i.difficulty??"Unknown",tags:r,content:i.content??"",similarQuestions:W(i.similarQuestions)}}function W(n){if(!n)return[];try{let s=typeof n=="string"?JSON.parse(n):n;return Array.isArray(s)?s.map(t=>({title:t.title,slug:t.titleSlug,difficulty:t.difficulty})).filter(t=>t.title&&t.slug):[]}catch(s){return console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0440\u0430\u0441\u043F\u0430\u0440\u0441\u0438\u0442\u044C similarQuestions",s),[]}}async function A(n,s){let t=await(0,p.requestUrl)({url:"https://leetcode.com/api/problems/all/",method:"GET",headers:w({titleSlug:"",cookie:s})});if(t.status!==200)return console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0441\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447 \u043F\u043E \u043D\u043E\u043C\u0435\u0440\u0443",t.status),null;let i=((t.json??JSON.parse(t.text))?.stat_status_pairs??[]).find(r=>String(r?.stat?.frontend_question_id)===String(n))?.stat?.question__title_slug;return typeof i=="string"&&i.trim()?i.trim():null}async function N(n,s){return(await y(n,s,{limit:1}))[0]??null}async function y(n,s,t={}){let{limit:e=20}=t,o=w({titleSlug:n,cookie:s}),a=await X(n,o,e);if(!a.length)return[];let i=[];for(let r of a){let u=await K(r,{cookie:s,titleSlug:n});u?.code&&i.push(u)}return i}async function X(n,s,t){let e=await(0,p.requestUrl)({url:"https://leetcode.com/graphql",method:"POST",body:JSON.stringify({query:G,variables:{offset:0,limit:t,questionSlug:n}}),headers:s,throw:!1}),o=[];return e.status===200?o=(e.json??JSON.parse(e.text))?.data?.questionSubmissionList?.submissions??[]:console.warn("questionSubmissionList status",{status:e.status,text:e.text?.slice(0,400)}),!Array.isArray(o)||o.length===0?(console.warn("submissions list is empty"),[]):o.filter(i=>i?.statusDisplay==="Accepted").sort((i,r)=>(Number(r.timestamp)||0)-(Number(i.timestamp)||0)).map(i=>({id:String(i.id),lang:i.lang,runtime:i.runtime,memory:i.memory,timestamp:i.timestamp?Number(i.timestamp):void 0}))}async function K(n,s){let{cookie:t,titleSlug:e}=s,o=w({titleSlug:e,cookie:t,referer:`https://leetcode.com/submissions/detail/${n.id}/`}),a=await(0,p.requestUrl)({url:"https://leetcode.com/graphql",method:"POST",body:JSON.stringify({query:Y,variables:{submissionId:Number(n.id)}}),headers:o,throw:!1});if(a.status!==200)return console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u0438 \u0441\u0430\u0431\u043C\u0438\u0442\u0430",{status:a.status,text:a.text?.slice(0,400)}),null;let r=(a.json??JSON.parse(a.text))?.data?.submissionDetails;return r?.code?{id:String(r.id??n.id),code:r.code,lang:r.lang?.name??n.lang,runtime:r.runtimeDisplay??r.runtime??n.runtime,memory:r.memoryDisplay??r.memory??n.memory,timestamp:r.timestamp??n.timestamp}:null}function w(n){let{titleSlug:s,cookie:t,referer:e}=n,o={"content-type":"application/json",referer:e??`https://leetcode.com/problems/${s}/`,origin:"https://leetcode.com","x-requested-with":"XMLHttpRequest"},a=t?.trim();if(a){o.Cookie=a;let i=Z(a,"csrftoken");i&&(o["x-csrftoken"]=i)}return o}function Z(n,s){let t=n.match(new RegExp(`${s}=([^;\\s]+)`));return t?t[1]??null:null}var O={en:{commands:{createNote:"Create note from LeetCode link",importSolution:"Import solution for current problem"},modal:{title:"LeetCode link or problem number",label:"Link or number",placeholder:"https://leetcode.com/problems/two-sum/ or 1",button:"Create"},notices:{resolveSlugFail:"Could not resolve problem (check link or number)",fetchError:"Failed to fetch data",unknownRequestError:"Unknown request error",created:"Created",createFileFail:"Failed to create file",noActiveNote:"No active note",resolveFromFileFail:"Could not resolve problem (no link in frontmatter)",noCookies:"Set csrftoken and LEETCODE_SESSION in settings",noAccepted:"No Accepted solutions found",updated:"Solutions updated",importError:"Failed to import solution"},errors:{pathConflict:n=>`Path ${n} is already a file.`}},ru:{commands:{createNote:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u043E \u0441\u0441\u044B\u043B\u043A\u0435 LeetCode",importSolution:"\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0434\u043B\u044F \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"},modal:{title:"\u0421\u0441\u044B\u043B\u043A\u0430 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440 \u0437\u0430\u0434\u0430\u0447\u0438 LeetCode",label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440",placeholder:"https://leetcode.com/problems/two-sum/ \u0438\u043B\u0438 1",button:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C"},notices:{resolveSlugFail:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443 (\u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440)",fetchError:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445",unknownRequestError:"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0440\u043E\u0441\u0430",created:"\u0421\u043E\u0437\u0434\u0430\u043D\u043E",createFileFail:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0444\u0430\u0439\u043B",noActiveNote:"\u041D\u0435\u0442 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",resolveFromFileFail:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443 (\u043D\u0435\u0442 \u0441\u0441\u044B\u043B\u043A\u0438 \u0432 frontmatter)",noCookies:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 csrftoken \u0438 LEETCODE_SESSION \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445",noAccepted:"Accepted \u0440\u0435\u0448\u0435\u043D\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B",updated:"\u0420\u0435\u0448\u0435\u043D\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B",importError:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u0435"},errors:{pathConflict:n=>`\u041F\u0443\u0442\u044C ${n} \u0443\u0436\u0435 \u0437\u0430\u043D\u044F\u0442 \u0444\u0430\u0439\u043B\u043E\u043C.`}}};function E(n){return O[n]??O.en}var v=class extends c.Plugin{constructor(){super(...arguments);this.settings=x}async onload(){await this.loadSettings();let t=E(this.settings.language);this.addCommand({id:"create-leetcode-note",name:t.commands.createNote,callback:()=>this.handleCreateNote()}),this.addCommand({id:"import-leetcode-solution",name:t.commands.importSolution,callback:()=>this.handleImportSolution()}),this.addSettingTab(new h(this.app,this))}async loadSettings(){let t=await this.loadData();this.settings=Object.assign({},x,t)}async saveSettings(){await this.saveData(this.settings)}async handleCreateNote(){let t=E(this.settings.language),e=await new $(this.app,t).waitForInput();if(!e)return;let o=this.buildCookieHeader(),a=await tt(e,o);if(!a){new c.Notice(t.notices.resolveSlugFail);return}let i,r=[];try{if(i=await I(a,o),this.settings.insertAllSolutions)r=await y(a,o);else{let l=await N(a,o);r=l?[l]:[]}}catch(l){console.error(l);let d=l instanceof Error?l.message:t.notices.unknownRequestError;new c.Notice(`${t.notices.fetchError}: ${d}`);return}let u=T(i,this.settings.includeDescription,r,this.settings.language);try{let l=await this.createNoteFile(i,u);new c.Notice(`${t.notices.created}: ${l}`),await this.app.workspace.openLinkText(l,"",!1)}catch(l){console.error(l);let d=l instanceof Error?l.message:t.notices.createFileFail;new c.Notice(d)}}async handleImportSolution(){let t=E(this.settings.language),e=this.app.workspace.getActiveFile();if(!e){new c.Notice(t.notices.noActiveNote);return}let o=await nt(this.app,e);if(!o){new c.Notice(t.notices.resolveFromFileFail);return}let a=this.buildCookieHeader();if(!a){new c.Notice(t.notices.noCookies);return}try{let r=await(this.settings.insertAllSolutions?await y(o,a):N(o,a).then(d=>d?[d]:[]));if(!r.length){new c.Notice(t.notices.noAccepted);return}let u=await this.app.vault.read(e),l=st(u,r,this.settings.language);await this.app.vault.modify(e,l),new c.Notice(t.notices.updated)}catch(i){console.error("Import solution error",i);let r=i instanceof Error?i.message:t.notices.importError;new c.Notice(r)}}buildCookieHeader(){let t=[];if(this.settings.csrftoken){let e=this.settings.csrftoken.trim();e&&t.push(`csrftoken=${e.replace(/^csrftoken=/,"")}`)}if(this.settings.leetcodeSession){let e=this.settings.leetcodeSession.trim();e&&t.push(`LEETCODE_SESSION=${e.replace(/^LEETCODE_SESSION=/,"")}`)}return t.join("; ")}async createNoteFile(t,e){let o=this.settings.targetFolder.trim(),a=o?(0,c.normalizePath)(o):"",r=`${this.buildFileName(t)}.md`,u=a?(0,c.normalizePath)(`${a}/${r}`):(0,c.normalizePath)(r);a&&await this.ensureFolder(a);let l=await this.resolveCollision(u);return await this.app.vault.create(l,e),l}buildFileName(t){let e=this.settings.filenameTemplate||"{{number}}-{{slug}}",o=et,a={"{{number}}":t.number??t.id??"","{{slug}}":t.slug??"","{{title}}":t.title??""},r=Object.entries(a).reduce((u,[l,d])=>u.replaceAll(l,o(d)),e).trim();return r.length?r:o(t.slug??"leetcode-problem")}async ensureFolder(t){let e=this.app.vault.getAbstractFileByPath(t);if(!e){await this.app.vault.createFolder(t);return}if(!(e instanceof c.TFolder))throw new Error(E(this.settings.language).errors.pathConflict(t))}async resolveCollision(t){if(!this.app.vault.getAbstractFileByPath(t))return t;let e=t.lastIndexOf("."),o=e===-1?t:t.slice(0,e),a=e===-1?"":t.slice(e),i=1,r=`${o} ${i}${a}`;for(;this.app.vault.getAbstractFileByPath(r);)i+=1,r=`${o} ${i}${a}`;return r}},$=class extends c.Modal{constructor(t,e){super(t);this.resolve=()=>{};this.reject=()=>{};this.strings=e}waitForInput(){return new Promise((t,e)=>{this.resolve=t,this.reject=e,this.open()})}onOpen(){let{contentEl:t}=this;t.empty(),t.createEl("h2",{text:this.strings.modal.title});let e="";new c.Setting(t).setName(this.strings.modal.label).addText(o=>o.setPlaceholder(this.strings.modal.placeholder).onChange(a=>{e=a.trim()})),new c.Setting(t).addButton(o=>o.setButtonText(this.strings.modal.button).setCta().onClick(()=>{this.close(),this.resolve(e||null)}))}onClose(){let{contentEl:t}=this;t.empty()}};function F(n){return n.match(/leetcode\.com\/problems\/([a-z0-9-]+)/i)?.[1]??null}async function tt(n,s){let t=F(n);if(t)return t;let e=n.trim();return/^\d+$/.test(e)?await A(e,s):null}function et(n){let s=n.trim();return s?s.replace(/[<>:"/\\|?*]+/g,"").replace(/\s+/g,"-"):""}async function nt(n,s){let e=n.metadataCache.getFileCache(s)?.frontmatter?.link;if(typeof e=="string"){let i=F(e);if(i)return i}let o=await n.vault.read(s),a=F(o);return a||null}function st(n,s,t){if(!s.length)return n;let o=Object.values(S).map(ot).join("|"),a=new RegExp(`##\\s+(?:${o})[\\s\\S]*$`,"i"),i=n.match(a),r=i?i[0]:"",u=it(r),l=s.filter(k=>!u.includes(k.code.trim()));if(l.length===0)return n;let d=b(l,{includeHeader:!1,language:t}).trim();if(i){let k=r.trimEnd()+`

`+d;return n.replace(a,k)}let f=b(l,{includeHeader:!0,language:t}).trim(),g=n.trimEnd();return g?`${g}

${f}
`:`${f}
`}function it(n){let s=[],t=/```[a-z]*\n([\s\S]*?)\n```/gi,e;for(;(e=t.exec(n))!==null;)s.push((e[1]??"").trim());return s}function ot(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}
