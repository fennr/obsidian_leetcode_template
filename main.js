"use strict";var F=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var H=Object.prototype.hasOwnProperty;var _=(n,s)=>{for(var t in s)F(n,t,{get:s[t],enumerable:!0})},Q=(n,s,t,e)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of R(s))!H.call(n,i)&&i!==t&&F(n,i,{get:()=>s[i],enumerable:!(e=O(s,i))||e.enumerable});return n};var j=n=>Q(F({},"__esModule",{value:!0}),n);var lt={};_(lt,{default:()=>E});module.exports=j(lt);var c=require("obsidian");var p=require("obsidian"),U=`
  query questionData($titleSlug: String!) {
    question(titleSlug: $titleSlug) {
      questionId
      questionFrontendId
      title
      titleSlug
      difficulty
      content
      similarQuestions
      topicTags {
        name
        slug
      }
    }
  }
`,M=`
  query submissionList($offset: Int!, $limit: Int!, $questionSlug: String!) {
    questionSubmissionList(offset: $offset, limit: $limit, questionSlug: $questionSlug) {
      submissions {
        id
        statusDisplay
        lang
        runtime
        memory
        timestamp
      }
    }
  }
`,B=`
  query submissionDetails($submissionId: Int!) {
    submissionDetails(submissionId: $submissionId) {
      id
      code
      lang {
        name
        verboseName
      }
      runtime
      runtimeDisplay
      memory
      memoryDisplay
      timestamp
    }
  }
`;async function P(n,s){let t=S({titleSlug:n,cookie:s}),e={url:"https://leetcode.com/graphql",method:"POST",body:JSON.stringify({query:U,variables:{titleSlug:n}}),headers:t,throw:!1},i=await(0,p.requestUrl)(e);if(i.status!==200)throw new Error(`LeetCode \u0432\u0435\u0440\u043D\u0443\u043B \u0441\u0442\u0430\u0442\u0443\u0441 ${i.status}`);let r=i.json??JSON.parse(i.text),o=b(r,{data:{}}).data?.question;if(!o)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 (\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E, \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0439 cookie)");let l=o.topicTags?.map(u=>u?.name).filter(u=>!!u)??[];return{id:o.questionId??void 0,number:o.questionFrontendId??o.questionId??void 0,title:o.title??n,slug:o.titleSlug??n,difficulty:o.difficulty??"Unknown",tags:l,content:o.content??"",similarQuestions:z(o.similarQuestions)}}function z(n){if(!n)return[];try{let s=typeof n=="string"?JSON.parse(n):n;return Array.isArray(s)?s.map(t=>Y(t)).filter(t=>!!t):[]}catch(s){return console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0440\u0430\u0441\u043F\u0430\u0440\u0441\u0438\u0442\u044C similarQuestions",s),[]}}async function T(n,s){let t=await(0,p.requestUrl)({url:"https://leetcode.com/api/problems/all/",method:"GET",headers:S({titleSlug:"",cookie:s})});if(t.status!==200)return console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0441\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447 \u043F\u043E \u043D\u043E\u043C\u0435\u0440\u0443",t.status),null;let e=t.json??JSON.parse(t.text),o=(b(e,{}).stat_status_pairs??[]).find(l=>String(l?.stat?.frontend_question_id)===String(n))?.stat?.question__title_slug;return typeof o=="string"&&o.trim()?o.trim():null}async function N(n,s){return(await h(n,s,{limit:1}))[0]??null}async function h(n,s,t={}){let{limit:e=20}=t,i=S({titleSlug:n,cookie:s}),r=await J(n,i,e);if(!r.length)return[];let a=[];for(let o of r){let l=await V(o,{cookie:s,titleSlug:n});l?.code&&a.push(l)}return a}async function J(n,s,t){let e=await(0,p.requestUrl)({url:"https://leetcode.com/graphql",method:"POST",body:JSON.stringify({query:M,variables:{offset:0,limit:t,questionSlug:n}}),headers:s,throw:!1}),i=e.json??JSON.parse(e.text),a=b(i,{data:{questionSubmissionList:{submissions:[]}}}).data?.questionSubmissionList?.submissions?.filter(Boolean)??[];return e.status!==200&&console.warn("questionSubmissionList status",{status:e.status,text:e.text?.slice(0,400)}),!Array.isArray(a)||a.length===0?(console.warn("submissions list is empty"),[]):a.filter(l=>l?.statusDisplay==="Accepted").sort((l,u)=>(Number(u.timestamp)||0)-(Number(l.timestamp)||0)).map(l=>({id:String(l.id),lang:l.lang,runtime:l.runtime,memory:l.memory,timestamp:l.timestamp?Number(l.timestamp):void 0}))}async function V(n,s){let{cookie:t,titleSlug:e}=s,i=S({titleSlug:e,cookie:t,referer:`https://leetcode.com/submissions/detail/${n.id}/`}),r=await(0,p.requestUrl)({url:"https://leetcode.com/graphql",method:"POST",body:JSON.stringify({query:B,variables:{submissionId:Number(n.id)}}),headers:i,throw:!1});if(r.status!==200)return console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u0438 \u0441\u0430\u0431\u043C\u0438\u0442\u0430",{status:r.status,text:r.text?.slice(0,400)}),null;let a=r.json??JSON.parse(r.text),l=b(a,{}).data?.submissionDetails;return l?.code?{id:String(l.id??n.id),code:l.code,lang:l.lang?.name??n.lang,runtime:l.runtimeDisplay??l.runtime??n.runtime,memory:l.memoryDisplay??l.memory??n.memory,timestamp:l.timestamp??n.timestamp}:null}function S(n){let{titleSlug:s,cookie:t,referer:e}=n,i={"content-type":"application/json",referer:e??`https://leetcode.com/problems/${s}/`,origin:"https://leetcode.com","x-requested-with":"XMLHttpRequest"},r=t?.trim();if(r){i.Cookie=r;let a=G(r,"csrftoken");a&&(i["x-csrftoken"]=a)}return i}function G(n,s){let t=n.match(new RegExp(`${s}=([^;\\s]+)`));return t?t[1]??null:null}function b(n,s){return n&&typeof n=="object"&&!Array.isArray(n)?n:s}function Y(n){if(!n||typeof n!="object")return null;let s=n;return!s.title||!s.titleSlug?null:{title:s.title,slug:s.titleSlug,difficulty:s.difficulty??""}}var g=require("obsidian"),x={csrftoken:"",leetcodeSession:"",targetFolder:"",filenameTemplate:"{{number}}-{{slug}}",includeDescription:!0,insertAllSolutions:!1,language:"en"},y=class extends g.PluginSettingTab{constructor(s,t){super(s,t),this.plugin=t}display(){let{containerEl:s}=this;s.empty(),new g.Setting(s).setName("Template").setHeading(),new g.Setting(s).setName("CSRF token").setDesc("Cookie value csrftoken from leetcode.com.").addText(t=>t.setPlaceholder("csrftoken=...").setValue(this.plugin.settings.csrftoken).onChange(async e=>{this.plugin.settings.csrftoken=e.trim(),await this.plugin.saveSettings()})),new g.Setting(s).setName("LeetCode session").setDesc("Cookie value LEETCODE_SESSION from leetcode.com.").addText(t=>t.setPlaceholder("LEETCODE_SESSION=...").setValue(this.plugin.settings.leetcodeSession).onChange(async e=>{this.plugin.settings.leetcodeSession=e.trim(),await this.plugin.saveSettings()})),new g.Setting(s).setName("Notes folder").setDesc("Target folder for generated notes (can be empty).").addText(t=>t.setPlaceholder("LeetCode").setValue(this.plugin.settings.targetFolder).onChange(async e=>{this.plugin.settings.targetFolder=e.trim(),await this.plugin.saveSettings()})),new g.Setting(s).setName("Filename template").setDesc("Placeholders: {{number}}, {{slug}}, {{title}}.").addText(t=>t.setPlaceholder("{{number}}-{{slug}}").setValue(this.plugin.settings.filenameTemplate).onChange(async e=>{this.plugin.settings.filenameTemplate=e.trim()||"{{number}}-{{slug}}",await this.plugin.saveSettings()})),new g.Setting(s).setName("Include description").setDesc("Turn off to skip task description in the note.").addToggle(t=>t.setValue(this.plugin.settings.includeDescription).onChange(async e=>{this.plugin.settings.includeDescription=e,await this.plugin.saveSettings()})),new g.Setting(s).setName("Insert all solutions").setDesc("If enabled, add all accepted solutions (deduplicated).").addToggle(t=>t.setValue(this.plugin.settings.insertAllSolutions).onChange(async e=>{this.plugin.settings.insertAllSolutions=e,await this.plugin.saveSettings()})),new g.Setting(s).setName("Language").setDesc("UI language for plugin texts and template (en/ru).").addDropdown(t=>t.addOption("en","English").addOption("ru","\u0420\u0443\u0441\u0441\u043A\u0438\u0439").setValue(this.plugin.settings.language).onChange(async e=>{this.plugin.settings.language=e||"en",await this.plugin.saveSettings()}))}};var A=require("obsidian"),I={en:{descriptionHeader:"Description",myIdeaHeader:"My idea",myIdeaPlaceholder:"(your plan)",optimalSolutionHeader:"Optimal solution",optimalSolutionPlaceholder:"(notes)",similarHeader:"Similar questions",solutionsHeader:"Solutions",descriptionUnavailable:"(description unavailable or disabled)"},ru:{descriptionHeader:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",myIdeaHeader:"\u041C\u043E\u044F \u0438\u0434\u0435\u044F",myIdeaPlaceholder:"(\u0432\u0430\u0448 \u043F\u043B\u0430\u043D)",optimalSolutionHeader:"\u041E\u043F\u0442\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435",optimalSolutionPlaceholder:"(\u043A\u043E\u043D\u0441\u043F\u0435\u043A\u0442)",similarHeader:"\u041F\u043E\u0445\u043E\u0436\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B",solutionsHeader:"\u0420\u0435\u0448\u0435\u043D\u0438\u044F",descriptionUnavailable:"(\u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u0438\u043B\u0438 \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E)"}};function W(n="en"){return I[n]??I.en}var w={en:"Solutions",ru:"\u0420\u0435\u0448\u0435\u043D\u0438\u044F"};function q(n,s,t,e="en"){let i=W(e),r=n.tags?.length?n.tags.join(", "):"",a=`https://leetcode.com/problems/${n.slug}/`,o=["---",`title: ${n.title}`,`number: ${n.number??""}`,`difficulty: ${n.difficulty}`,`tags: [${r}]`,`link: ${a}`,"---"].join(`
`),l=s&&n.content?tt((0,A.htmlToMarkdown)(n.content).trim()):i.descriptionUnavailable,u=[o,`# ${n.title}`,"",`## ${i.descriptionHeader}`,l,"",`## ${i.myIdeaHeader}`,i.myIdeaPlaceholder,"",`## ${i.optimalSolutionHeader}`,i.optimalSolutionPlaceholder,""];if(n.similarQuestions.length>0){let f=n.similarQuestions.map(d=>`- ${d.title} (${d.difficulty||"?"}) \u2014 https://leetcode.com/problems/${d.slug}/`).join(`
`);u.push(`## ${i.similarHeader}`,f,"")}let m=Array.isArray(t)?t:t?[t]:[];return m.length>0&&u.push(k(m,{language:e})),u.join(`
`)}function k(n,s={}){let{includeHeader:t=!0,language:e="en"}=s,i=et(n);if(i.length===0)return"";let r=i.map(X);return t?[`## ${w[e]??w.en}`,r.join(`

`)].join(`

`):r.join(`

`)}function X(n){let s=n.lang?n.lang.toLowerCase():"",t=n.code.trimEnd(),e=[];n.lang&&e.push(n.lang);let i=K(n.runtime);i&&e.push(`Runtime: ${i}`);let r=Z(n.memory);r&&e.push(`Memory: ${r}`);let a=n.timestamp?new Date(n.timestamp*1e3):null;a&&e.push(a.toISOString());let o=e.join(" \xB7 ");return`${o?`${o}

`:""}\`\`\`${s}
${t}
\`\`\``}function K(n){let s=String(n??"").trim();if(!s)return"";let t=s.match(/([0-9]+(?:\.[0-9]+)?)\s*(ms|milliseconds?|s|sec|seconds?)?/i);if(!t)return s;let e=parseFloat(t[1]??""),r=(t[2]??"").toLowerCase();if(Number.isNaN(e))return s;let a=e;return r.startsWith("s")&&(a=e*1e3),`${a>=10?Math.round(a):parseFloat(a.toFixed(2))} ms`}function Z(n){let s=String(n??"").trim();if(!s)return"";let t=s.match(/([0-9]+(?:\.[0-9]+)?)\s*(b|bytes?|kb|mb|gb)?/i);if(!t)return s;let e=parseFloat(t[1]??""),i=t[2],r=i?i.toLowerCase():"";if(Number.isNaN(e))return s;let a;switch(r){case"b":case"byte":case"bytes":a=e/(1024*1024);break;case"kb":a=e/1024;break;case"gb":a=e*1024;break;case"mb":a=e;break;default:e>1e6?a=e/(1024*1024):e>1e4?a=e/1024:a=e}return`${parseFloat(a.toFixed(2))} MB`}function tt(n){let s=n.split(`
`),t=[],e=!1,i=o=>o.trim().replace(/^[-*>+\s]+/,"").replace(/^\*\*/,"").replace(/\*\*$/,""),r=o=>/^(Input|Output|Explanation)\s*:/i.test(i(o)),a=o=>/^Example\b/i.test(i(o));for(let o of s){if(r(o)){e||(t.push("```"),e=!0),t.push(o.trim());continue}if(e&&(t.push("```"),e=!1,o.trim()==="")){t.push("");continue}if(a(o)){t.push(o);continue}t.push(o)}return e&&t.push("```"),t.join(`
`)}function et(n){let s=new Set,t=[];for(let e of n){let i=e.code.trim();s.has(i)||(s.add(i),t.push({...e,code:i}))}return t}var D={en:{commands:{createNote:"Create note from LeetCode link",importSolution:"Import solution for current problem"},modal:{title:"LeetCode link or problem number",label:"Link or number",placeholder:"https://leetcode.com/problems/two-sum/ or 1",button:"Create"},notices:{resolveSlugFail:"Could not resolve problem (check link or number)",fetchError:"Failed to fetch data",unknownRequestError:"Unknown request error",created:"Created",createFileFail:"Failed to create file",noActiveNote:"No active note",resolveFromFileFail:"Could not resolve problem (no link in frontmatter)",noCookies:"Set csrftoken and LEETCODE_SESSION in settings",noAccepted:"No accepted solutions found",updated:"Solutions updated",importError:"Failed to import solution"},errors:{pathConflict:n=>`Path ${n} is already a file.`}},ru:{commands:{createNote:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u043E \u0441\u0441\u044B\u043B\u043A\u0435 LeetCode",importSolution:"\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0434\u043B\u044F \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"},modal:{title:"\u0421\u0441\u044B\u043B\u043A\u0430 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440 \u0437\u0430\u0434\u0430\u0447\u0438 LeetCode",label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440",placeholder:"https://leetcode.com/problems/two-sum/ \u0438\u043B\u0438 1",button:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C"},notices:{resolveSlugFail:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443 (\u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440)",fetchError:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445",unknownRequestError:"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0440\u043E\u0441\u0430",created:"\u0421\u043E\u0437\u0434\u0430\u043D\u043E",createFileFail:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0444\u0430\u0439\u043B",noActiveNote:"\u041D\u0435\u0442 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",resolveFromFileFail:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443 (\u043D\u0435\u0442 \u0441\u0441\u044B\u043B\u043A\u0438 \u0432 frontmatter)",noCookies:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 csrftoken \u0438 LEETCODE_SESSION \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445",noAccepted:"Accepted \u0440\u0435\u0448\u0435\u043D\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B",updated:"\u0420\u0435\u0448\u0435\u043D\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B",importError:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u0435"},errors:{pathConflict:n=>`\u041F\u0443\u0442\u044C ${n} \u0443\u0436\u0435 \u0437\u0430\u043D\u044F\u0442 \u0444\u0430\u0439\u043B\u043E\u043C.`}}};function v(n){return D[n]??D.en}var E=class extends c.Plugin{constructor(){super(...arguments);this.settings=x}async onload(){await this.loadSettings();let t=v(this.settings.language);this.addCommand({id:"create-leetcode-note",name:t.commands.createNote,callback:()=>this.handleCreateNote()}),this.addCommand({id:"import-leetcode-solution",name:t.commands.importSolution,callback:()=>this.handleImportSolution()}),this.addSettingTab(new y(this.app,this))}async loadSettings(){let t=await this.loadData(),e=t&&typeof t=="object"?t:null;this.settings={...x,...e??{}}}async saveSettings(){await this.saveData(this.settings)}async handleCreateNote(){let t=v(this.settings.language),e=await new $(this.app,t).waitForInput();if(!e)return;let i=this.buildCookieHeader(),r=await nt(e,i);if(!r){new c.Notice(t.notices.resolveSlugFail);return}let a,o=[];try{if(a=await P(r,i),this.settings.insertAllSolutions)o=await h(r,i);else{let u=await N(r,i);o=u?[u]:[]}}catch(u){console.error(u);let m=u instanceof Error?u.message:t.notices.unknownRequestError;new c.Notice(`${t.notices.fetchError}: ${m}`);return}let l=q(a,this.settings.includeDescription,o,this.settings.language);try{let u=await this.createNoteFile(a,l);new c.Notice(`${t.notices.created}: ${u}`),await this.app.workspace.openLinkText(u,"",!1)}catch(u){console.error(u);let m=u instanceof Error?u.message:t.notices.createFileFail;new c.Notice(m)}}async handleImportSolution(){let t=v(this.settings.language),e=this.app.workspace.getActiveFile();if(!e){new c.Notice(t.notices.noActiveNote);return}let i=await it(this.app,e);if(!i){new c.Notice(t.notices.resolveFromFileFail);return}let r=this.buildCookieHeader();if(!r){new c.Notice(t.notices.noCookies);return}try{let o=await(this.settings.insertAllSolutions?await h(i,r):N(i,r).then(m=>m?[m]:[]));if(!o.length){new c.Notice(t.notices.noAccepted);return}let l=await this.app.vault.read(e),u=ot(l,o,this.settings.language);await this.app.vault.modify(e,u),new c.Notice(t.notices.updated)}catch(a){console.error("Import solution error",a);let o=a instanceof Error?a.message:t.notices.importError;new c.Notice(o)}}buildCookieHeader(){let t=[];if(this.settings.csrftoken){let e=this.settings.csrftoken.trim();e&&t.push(`csrftoken=${e.replace(/^csrftoken=/,"")}`)}if(this.settings.leetcodeSession){let e=this.settings.leetcodeSession.trim();e&&t.push(`LEETCODE_SESSION=${e.replace(/^LEETCODE_SESSION=/,"")}`)}return t.join("; ")}async createNoteFile(t,e){let i=this.settings.targetFolder.trim(),r=i?(0,c.normalizePath)(i):"",o=`${this.buildFileName(t)}.md`,l=r?(0,c.normalizePath)(`${r}/${o}`):(0,c.normalizePath)(o);r&&await this.ensureFolder(r);let u=this.resolveCollision(l);return await this.app.vault.create(u,e),u}buildFileName(t){let e=this.settings.filenameTemplate||"{{number}}-{{slug}}",i=st,r={"{{number}}":t.number??t.id??"","{{slug}}":t.slug??"","{{title}}":t.title??""},o=Object.entries(r).reduce((l,[u,m])=>l.replaceAll(u,i(m)),e).trim();return o.length?o:i(t.slug??"leetcode-problem")}async ensureFolder(t){let e=this.app.vault.getAbstractFileByPath(t);if(!e){await this.app.vault.createFolder(t);return}if(!(e instanceof c.TFolder))throw new Error(v(this.settings.language).errors.pathConflict(t))}resolveCollision(t){if(!this.app.vault.getAbstractFileByPath(t))return t;let e=t.lastIndexOf("."),i=e===-1?t:t.slice(0,e),r=e===-1?"":t.slice(e),a=1,o=`${i} ${a}${r}`;for(;this.app.vault.getAbstractFileByPath(o);)a+=1,o=`${i} ${a}${r}`;return o}},$=class extends c.Modal{constructor(t,e){super(t);this.resolve=()=>{};this.reject=()=>{};this.strings=e}waitForInput(){return new Promise((t,e)=>{this.resolve=t,this.reject=e,this.open()})}onOpen(){let{contentEl:t}=this;t.empty(),new c.Setting(t).setName(this.strings.modal.title).setHeading();let e="";new c.Setting(t).setName(this.strings.modal.label).addText(i=>i.setPlaceholder(this.strings.modal.placeholder).onChange(r=>{e=r.trim()})),new c.Setting(t).addButton(i=>i.setButtonText(this.strings.modal.button).setCta().onClick(()=>{this.close(),this.resolve(e||null)}))}onClose(){let{contentEl:t}=this;t.empty()}};function L(n){return n.match(/leetcode\.com\/problems\/([a-z0-9-]+)/i)?.[1]??null}async function nt(n,s){let t=L(n);if(t)return t;let e=n.trim();return/^\d+$/.test(e)?await T(e,s):null}function st(n){let s=n.trim();return s?s.replace(/[<>:"/\\|?*]+/g,"").replace(/\s+/g,"-"):""}async function it(n,s){let e=n.metadataCache.getFileCache(s)?.frontmatter?.link;if(typeof e=="string"){let a=L(e);if(a)return a}let i=await n.vault.read(s),r=L(i);return r||null}function ot(n,s,t){if(!s.length)return n;let i=Object.values(w).map(at).join("|"),r=new RegExp(`##\\s+(?:${i})[\\s\\S]*$`,"i"),a=n.match(r),o=a?a[0]:"",l=rt(o),u=s.filter(C=>!l.includes(C.code.trim()));if(u.length===0)return n;let m=k(u,{includeHeader:!1,language:t}).trim();if(a){let C=o.trimEnd()+`

`+m;return n.replace(r,C)}let f=k(u,{includeHeader:!0,language:t}).trim(),d=n.trimEnd();return d?`${d}

${f}
`:`${f}
`}function rt(n){let s=[],t=/```[a-z]*\n([\s\S]*?)\n```/gi,e;for(;(e=t.exec(n))!==null;)s.push((e[1]??"").trim());return s}function at(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}
