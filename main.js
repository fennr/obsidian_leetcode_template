"use strict";var F=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var H=Object.prototype.hasOwnProperty;var Q=(e,s)=>{for(var t in s)F(e,t,{get:s[t],enumerable:!0})},_=(e,s,t,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of R(s))!H.call(e,i)&&i!==t&&F(e,i,{get:()=>s[i],enumerable:!(n=O(s,i))||n.enumerable});return e};var j=e=>_(F({},"__esModule",{value:!0}),e);var lt={};Q(lt,{default:()=>E});module.exports=j(lt);var c=require("obsidian");var p=require("obsidian"),U=`
  query questionData($titleSlug: String!) {
    question(titleSlug: $titleSlug) {
      questionId
      questionFrontendId
      title
      titleSlug
      difficulty
      content
      similarQuestions
      topicTags {
        name
        slug
      }
    }
  }
`,M=`
  query submissionList($offset: Int!, $limit: Int!, $questionSlug: String!) {
    questionSubmissionList(offset: $offset, limit: $limit, questionSlug: $questionSlug) {
      submissions {
        id
        statusDisplay
        lang
        runtime
        memory
        timestamp
      }
    }
  }
`,B=`
  query submissionDetails($submissionId: Int!) {
    submissionDetails(submissionId: $submissionId) {
      id
      code
      lang {
        name
        verboseName
      }
      runtime
      runtimeDisplay
      memory
      memoryDisplay
      timestamp
    }
  }
`;async function P(e,s){let t=S({titleSlug:e,cookie:s}),n={url:"https://leetcode.com/graphql",method:"POST",body:JSON.stringify({query:U,variables:{titleSlug:e}}),headers:t,throw:!1},i=await(0,p.requestUrl)(n);if(i.status!==200)throw new Error(`LeetCode \u0432\u0435\u0440\u043D\u0443\u043B \u0441\u0442\u0430\u0442\u0443\u0441 ${i.status}`);let r=i.json??JSON.parse(i.text),o=b(r,{data:{}}).data?.question;if(!o)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 (\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E, \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0439 cookie)");let l=o.topicTags?.map(u=>u?.name).filter(u=>!!u)??[];return{id:o.questionId??void 0,number:o.questionFrontendId??o.questionId??void 0,title:o.title??e,slug:o.titleSlug??e,difficulty:o.difficulty??"Unknown",tags:l,content:o.content??"",similarQuestions:z(o.similarQuestions)}}function z(e){if(!e)return[];try{let s=typeof e=="string"?JSON.parse(e):e;return Array.isArray(s)?s.map(t=>Y(t)).filter(t=>!!t):[]}catch(s){return console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0440\u0430\u0441\u043F\u0430\u0440\u0441\u0438\u0442\u044C similarQuestions",s),[]}}async function T(e,s){let t=await(0,p.requestUrl)({url:"https://leetcode.com/api/problems/all/",method:"GET",headers:S({titleSlug:"",cookie:s})});if(t.status!==200)return console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0441\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447 \u043F\u043E \u043D\u043E\u043C\u0435\u0440\u0443",t.status),null;let n=t.json??JSON.parse(t.text),o=(b(n,{}).stat_status_pairs??[]).find(l=>String(l?.stat?.frontend_question_id)===String(e))?.stat?.question__title_slug;return typeof o=="string"&&o.trim()?o.trim():null}async function N(e,s){return(await h(e,s,{limit:1}))[0]??null}async function h(e,s,t={}){let{limit:n=20}=t,i=S({titleSlug:e,cookie:s}),r=await J(e,i,n);if(!r.length)return[];let a=[];for(let o of r){let l=await V(o,{cookie:s,titleSlug:e});l?.code&&a.push(l)}return a}async function J(e,s,t){let n=await(0,p.requestUrl)({url:"https://leetcode.com/graphql",method:"POST",body:JSON.stringify({query:M,variables:{offset:0,limit:t,questionSlug:e}}),headers:s,throw:!1}),i=n.json??JSON.parse(n.text),a=b(i,{data:{questionSubmissionList:{submissions:[]}}}).data?.questionSubmissionList?.submissions?.filter(Boolean)??[];return n.status!==200&&console.warn("questionSubmissionList status",{status:n.status,text:n.text?.slice(0,400)}),!Array.isArray(a)||a.length===0?(console.warn("submissions list is empty"),[]):a.filter(l=>l?.statusDisplay==="Accepted").sort((l,u)=>(Number(u.timestamp)||0)-(Number(l.timestamp)||0)).map(l=>({id:String(l.id),lang:l.lang,runtime:l.runtime,memory:l.memory,timestamp:l.timestamp?Number(l.timestamp):void 0}))}async function V(e,s){let{cookie:t,titleSlug:n}=s,i=S({titleSlug:n,cookie:t,referer:`https://leetcode.com/submissions/detail/${e.id}/`}),r=await(0,p.requestUrl)({url:"https://leetcode.com/graphql",method:"POST",body:JSON.stringify({query:B,variables:{submissionId:Number(e.id)}}),headers:i,throw:!1});if(r.status!==200)return console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u0438 \u0441\u0430\u0431\u043C\u0438\u0442\u0430",{status:r.status,text:r.text?.slice(0,400)}),null;let a=r.json??JSON.parse(r.text),l=b(a,{}).data?.submissionDetails;return l?.code?{id:String(l.id??e.id),code:l.code,lang:l.lang?.name??e.lang,runtime:l.runtimeDisplay??l.runtime??e.runtime,memory:l.memoryDisplay??l.memory??e.memory,timestamp:l.timestamp??e.timestamp}:null}function S(e){let{titleSlug:s,cookie:t,referer:n}=e,i={"content-type":"application/json",referer:n??`https://leetcode.com/problems/${s}/`,origin:"https://leetcode.com","x-requested-with":"XMLHttpRequest"},r=t?.trim();if(r){i.Cookie=r;let a=G(r,"csrftoken");a&&(i["x-csrftoken"]=a)}return i}function G(e,s){let t=e.match(new RegExp(`${s}=([^;\\s]+)`));return t?t[1]??null:null}function b(e,s){return e&&typeof e=="object"&&!Array.isArray(e)?e:s}function Y(e){if(!e||typeof e!="object")return null;let s=e;return!s.title||!s.titleSlug?null:{title:s.title,slug:s.titleSlug,difficulty:s.difficulty??""}}var g=require("obsidian"),x={csrftoken:"",leetcodeSession:"",targetFolder:"",filenameTemplate:"{{number}}-{{slug}}",includeDescription:!0,insertAllSolutions:!1,language:"en"},y=class extends g.PluginSettingTab{constructor(s,t){super(s,t),this.plugin=t}display(){let{containerEl:s}=this;s.empty(),new g.Setting(s).setName("LeetCode template").setHeading(),new g.Setting(s).setName("CSRF token").setDesc("Cookie value csrftoken from leetcode.com.").addText(t=>t.setPlaceholder("csrftoken=...").setValue(this.plugin.settings.csrftoken).onChange(async n=>{this.plugin.settings.csrftoken=n.trim(),await this.plugin.saveSettings()})),new g.Setting(s).setName("LeetCode session").setDesc("Cookie value LEETCODE_SESSION from leetcode.com.").addText(t=>t.setPlaceholder("LEETCODE_SESSION=...").setValue(this.plugin.settings.leetcodeSession).onChange(async n=>{this.plugin.settings.leetcodeSession=n.trim(),await this.plugin.saveSettings()})),new g.Setting(s).setName("Notes folder").setDesc("Target folder for generated notes (can be empty).").addText(t=>t.setPlaceholder("LeetCode").setValue(this.plugin.settings.targetFolder).onChange(async n=>{this.plugin.settings.targetFolder=n.trim(),await this.plugin.saveSettings()})),new g.Setting(s).setName("Filename template").setDesc("Placeholders: {{number}}, {{slug}}, {{title}}.").addText(t=>t.setPlaceholder("{{number}}-{{slug}}").setValue(this.plugin.settings.filenameTemplate).onChange(async n=>{this.plugin.settings.filenameTemplate=n.trim()||"{{number}}-{{slug}}",await this.plugin.saveSettings()})),new g.Setting(s).setName("Include description").setDesc("Turn off to skip task description in the note.").addToggle(t=>t.setValue(this.plugin.settings.includeDescription).onChange(async n=>{this.plugin.settings.includeDescription=n,await this.plugin.saveSettings()})),new g.Setting(s).setName("Insert all solutions").setDesc("If enabled, add all Accepted solutions (deduplicated).").addToggle(t=>t.setValue(this.plugin.settings.insertAllSolutions).onChange(async n=>{this.plugin.settings.insertAllSolutions=n,await this.plugin.saveSettings()})),new g.Setting(s).setName("Language").setDesc("UI language for plugin texts and template (en/ru).").addDropdown(t=>t.addOption("en","English").addOption("ru","\u0420\u0443\u0441\u0441\u043A\u0438\u0439").setValue(this.plugin.settings.language).onChange(async n=>{this.plugin.settings.language=n||"en",await this.plugin.saveSettings()}))}};var A=require("obsidian"),I={en:{descriptionHeader:"Description",myIdeaHeader:"My idea",myIdeaPlaceholder:"(your plan)",optimalSolutionHeader:"Optimal solution",optimalSolutionPlaceholder:"(notes)",similarHeader:"Similar questions",solutionsHeader:"Solutions",descriptionUnavailable:"(description unavailable or disabled)"},ru:{descriptionHeader:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",myIdeaHeader:"\u041C\u043E\u044F \u0438\u0434\u0435\u044F",myIdeaPlaceholder:"(\u0432\u0430\u0448 \u043F\u043B\u0430\u043D)",optimalSolutionHeader:"\u041E\u043F\u0442\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435",optimalSolutionPlaceholder:"(\u043A\u043E\u043D\u0441\u043F\u0435\u043A\u0442)",similarHeader:"\u041F\u043E\u0445\u043E\u0436\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B",solutionsHeader:"\u0420\u0435\u0448\u0435\u043D\u0438\u044F",descriptionUnavailable:"(\u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u0438\u043B\u0438 \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E)"}};function W(e="en"){return I[e]??I.en}var w={en:"Solutions",ru:"\u0420\u0435\u0448\u0435\u043D\u0438\u044F"};function q(e,s,t,n="en"){let i=W(n),r=e.tags?.length?e.tags.join(", "):"",a=`https://leetcode.com/problems/${e.slug}/`,o=["---",`title: ${e.title}`,`number: ${e.number??""}`,`difficulty: ${e.difficulty}`,`tags: [${r}]`,`link: ${a}`,"---"].join(`
`),l=s&&e.content?tt((0,A.htmlToMarkdown)(e.content).trim()):i.descriptionUnavailable,u=[o,`# ${e.title}`,"",`## ${i.descriptionHeader}`,l,"",`## ${i.myIdeaHeader}`,i.myIdeaPlaceholder,"",`## ${i.optimalSolutionHeader}`,i.optimalSolutionPlaceholder,""];if(e.similarQuestions.length>0){let f=e.similarQuestions.map(d=>`- ${d.title} (${d.difficulty||"?"}) \u2014 https://leetcode.com/problems/${d.slug}/`).join(`
`);u.push(`## ${i.similarHeader}`,f,"")}let m=Array.isArray(t)?t:t?[t]:[];return m.length>0&&u.push(k(m,{language:n})),u.join(`
`)}function k(e,s={}){let{includeHeader:t=!0,language:n="en"}=s,i=et(e);if(i.length===0)return"";let r=i.map(X);return t?[`## ${w[n]??w.en}`,r.join(`

`)].join(`

`):r.join(`

`)}function X(e){let s=e.lang?e.lang.toLowerCase():"",t=e.code.trimEnd(),n=[];e.lang&&n.push(e.lang);let i=K(e.runtime);i&&n.push(`Runtime: ${i}`);let r=Z(e.memory);r&&n.push(`Memory: ${r}`);let a=e.timestamp?new Date(e.timestamp*1e3):null;a&&n.push(a.toISOString());let o=n.join(" \xB7 ");return`${o?`${o}

`:""}\`\`\`${s}
${t}
\`\`\``}function K(e){let s=String(e??"").trim();if(!s)return"";let t=s.match(/([0-9]+(?:\.[0-9]+)?)\s*(ms|milliseconds?|s|sec|seconds?)?/i);if(!t)return s;let n=parseFloat(t[1]??""),r=(t[2]??"").toLowerCase();if(Number.isNaN(n))return s;let a=n;return r.startsWith("s")&&(a=n*1e3),`${a>=10?Math.round(a):parseFloat(a.toFixed(2))} ms`}function Z(e){let s=String(e??"").trim();if(!s)return"";let t=s.match(/([0-9]+(?:\.[0-9]+)?)\s*(b|bytes?|kb|mb|gb)?/i);if(!t)return s;let n=parseFloat(t[1]??""),i=t[2],r=i?i.toLowerCase():"";if(Number.isNaN(n))return s;let a;switch(r){case"b":case"byte":case"bytes":a=n/(1024*1024);break;case"kb":a=n/1024;break;case"gb":a=n*1024;break;case"mb":a=n;break;default:n>1e6?a=n/(1024*1024):n>1e4?a=n/1024:a=n}return`${parseFloat(a.toFixed(2))} MB`}function tt(e){let s=e.split(`
`),t=[],n=!1,i=o=>o.trim().replace(/^[-*>+\s]+/,"").replace(/^\*\*/,"").replace(/\*\*$/,""),r=o=>/^(Input|Output|Explanation)\s*:/i.test(i(o)),a=o=>/^Example\b/i.test(i(o));for(let o of s){if(r(o)){n||(t.push("```"),n=!0),t.push(o.trim());continue}if(n&&(t.push("```"),n=!1,o.trim()==="")){t.push("");continue}if(a(o)){t.push(o);continue}t.push(o)}return n&&t.push("```"),t.join(`
`)}function et(e){let s=new Set,t=[];for(let n of e){let i=n.code.trim();s.has(i)||(s.add(i),t.push({...n,code:i}))}return t}var D={en:{commands:{createNote:"Create note from LeetCode link",importSolution:"Import solution for current problem"},modal:{title:"LeetCode link or problem number",label:"Link or number",placeholder:"https://leetcode.com/problems/two-sum/ or 1",button:"Create"},notices:{resolveSlugFail:"Could not resolve problem (check link or number)",fetchError:"Failed to fetch data",unknownRequestError:"Unknown request error",created:"Created",createFileFail:"Failed to create file",noActiveNote:"No active note",resolveFromFileFail:"Could not resolve problem (no link in frontmatter)",noCookies:"Set csrftoken and LEETCODE_SESSION in settings",noAccepted:"No accepted solutions found",updated:"Solutions updated",importError:"Failed to import solution"},errors:{pathConflict:e=>`Path ${e} is already a file.`}},ru:{commands:{createNote:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u043E \u0441\u0441\u044B\u043B\u043A\u0435 LeetCode",importSolution:"\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0434\u043B\u044F \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"},modal:{title:"\u0421\u0441\u044B\u043B\u043A\u0430 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440 \u0437\u0430\u0434\u0430\u0447\u0438 LeetCode",label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440",placeholder:"https://leetcode.com/problems/two-sum/ \u0438\u043B\u0438 1",button:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C"},notices:{resolveSlugFail:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443 (\u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440)",fetchError:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445",unknownRequestError:"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0440\u043E\u0441\u0430",created:"\u0421\u043E\u0437\u0434\u0430\u043D\u043E",createFileFail:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0444\u0430\u0439\u043B",noActiveNote:"\u041D\u0435\u0442 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",resolveFromFileFail:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443 (\u043D\u0435\u0442 \u0441\u0441\u044B\u043B\u043A\u0438 \u0432 frontmatter)",noCookies:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 csrftoken \u0438 LEETCODE_SESSION \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445",noAccepted:"Accepted \u0440\u0435\u0448\u0435\u043D\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B",updated:"\u0420\u0435\u0448\u0435\u043D\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B",importError:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u0435"},errors:{pathConflict:e=>`\u041F\u0443\u0442\u044C ${e} \u0443\u0436\u0435 \u0437\u0430\u043D\u044F\u0442 \u0444\u0430\u0439\u043B\u043E\u043C.`}}};function v(e){return D[e]??D.en}var E=class extends c.Plugin{constructor(){super(...arguments);this.settings=x}async onload(){await this.loadSettings();let t=v(this.settings.language);this.addCommand({id:"create-leetcode-note",name:t.commands.createNote,callback:()=>this.handleCreateNote()}),this.addCommand({id:"import-leetcode-solution",name:t.commands.importSolution,callback:()=>this.handleImportSolution()}),this.addSettingTab(new y(this.app,this))}async loadSettings(){let t=await this.loadData();this.settings=Object.assign({},x,t)}async saveSettings(){await this.saveData(this.settings)}async handleCreateNote(){let t=v(this.settings.language),n=await new $(this.app,t).waitForInput();if(!n)return;let i=this.buildCookieHeader(),r=await nt(n,i);if(!r){new c.Notice(t.notices.resolveSlugFail);return}let a,o=[];try{if(a=await P(r,i),this.settings.insertAllSolutions)o=await h(r,i);else{let u=await N(r,i);o=u?[u]:[]}}catch(u){console.error(u);let m=u instanceof Error?u.message:t.notices.unknownRequestError;new c.Notice(`${t.notices.fetchError}: ${m}`);return}let l=q(a,this.settings.includeDescription,o,this.settings.language);try{let u=await this.createNoteFile(a,l);new c.Notice(`${t.notices.created}: ${u}`),await this.app.workspace.openLinkText(u,"",!1)}catch(u){console.error(u);let m=u instanceof Error?u.message:t.notices.createFileFail;new c.Notice(m)}}async handleImportSolution(){let t=v(this.settings.language),n=this.app.workspace.getActiveFile();if(!n){new c.Notice(t.notices.noActiveNote);return}let i=await it(this.app,n);if(!i){new c.Notice(t.notices.resolveFromFileFail);return}let r=this.buildCookieHeader();if(!r){new c.Notice(t.notices.noCookies);return}try{let o=await(this.settings.insertAllSolutions?await h(i,r):N(i,r).then(m=>m?[m]:[]));if(!o.length){new c.Notice(t.notices.noAccepted);return}let l=await this.app.vault.read(n),u=ot(l,o,this.settings.language);await this.app.vault.modify(n,u),new c.Notice(t.notices.updated)}catch(a){console.error("Import solution error",a);let o=a instanceof Error?a.message:t.notices.importError;new c.Notice(o)}}buildCookieHeader(){let t=[];if(this.settings.csrftoken){let n=this.settings.csrftoken.trim();n&&t.push(`csrftoken=${n.replace(/^csrftoken=/,"")}`)}if(this.settings.leetcodeSession){let n=this.settings.leetcodeSession.trim();n&&t.push(`LEETCODE_SESSION=${n.replace(/^LEETCODE_SESSION=/,"")}`)}return t.join("; ")}async createNoteFile(t,n){let i=this.settings.targetFolder.trim(),r=i?(0,c.normalizePath)(i):"",o=`${this.buildFileName(t)}.md`,l=r?(0,c.normalizePath)(`${r}/${o}`):(0,c.normalizePath)(o);r&&await this.ensureFolder(r);let u=this.resolveCollision(l);return await this.app.vault.create(u,n),u}buildFileName(t){let n=this.settings.filenameTemplate||"{{number}}-{{slug}}",i=st,r={"{{number}}":t.number??t.id??"","{{slug}}":t.slug??"","{{title}}":t.title??""},o=Object.entries(r).reduce((l,[u,m])=>l.replaceAll(u,i(m)),n).trim();return o.length?o:i(t.slug??"leetcode-problem")}async ensureFolder(t){let n=this.app.vault.getAbstractFileByPath(t);if(!n){await this.app.vault.createFolder(t);return}if(!(n instanceof c.TFolder))throw new Error(v(this.settings.language).errors.pathConflict(t))}resolveCollision(t){if(!this.app.vault.getAbstractFileByPath(t))return t;let n=t.lastIndexOf("."),i=n===-1?t:t.slice(0,n),r=n===-1?"":t.slice(n),a=1,o=`${i} ${a}${r}`;for(;this.app.vault.getAbstractFileByPath(o);)a+=1,o=`${i} ${a}${r}`;return o}},$=class extends c.Modal{constructor(t,n){super(t);this.resolve=()=>{};this.reject=()=>{};this.strings=n}waitForInput(){return new Promise((t,n)=>{this.resolve=t,this.reject=n,this.open()})}onOpen(){let{contentEl:t}=this;t.empty(),new c.Setting(t).setName(this.strings.modal.title).setHeading();let n="";new c.Setting(t).setName(this.strings.modal.label).addText(i=>i.setPlaceholder(this.strings.modal.placeholder).onChange(r=>{n=r.trim()})),new c.Setting(t).addButton(i=>i.setButtonText(this.strings.modal.button).setCta().onClick(()=>{this.close(),this.resolve(n||null)}))}onClose(){let{contentEl:t}=this;t.empty()}};function L(e){return e.match(/leetcode\.com\/problems\/([a-z0-9-]+)/i)?.[1]??null}async function nt(e,s){let t=L(e);if(t)return t;let n=e.trim();return/^\d+$/.test(n)?await T(n,s):null}function st(e){let s=e.trim();return s?s.replace(/[<>:"/\\|?*]+/g,"").replace(/\s+/g,"-"):""}async function it(e,s){let n=e.metadataCache.getFileCache(s)?.frontmatter?.link;if(typeof n=="string"){let a=L(n);if(a)return a}let i=await e.vault.read(s),r=L(i);return r||null}function ot(e,s,t){if(!s.length)return e;let i=Object.values(w).map(at).join("|"),r=new RegExp(`##\\s+(?:${i})[\\s\\S]*$`,"i"),a=e.match(r),o=a?a[0]:"",l=rt(o),u=s.filter(C=>!l.includes(C.code.trim()));if(u.length===0)return e;let m=k(u,{includeHeader:!1,language:t}).trim();if(a){let C=o.trimEnd()+`

`+m;return e.replace(r,C)}let f=k(u,{includeHeader:!0,language:t}).trim(),d=e.trimEnd();return d?`${d}

${f}
`:`${f}
`}function rt(e){let s=[],t=/```[a-z]*\n([\s\S]*?)\n```/gi,n;for(;(n=t.exec(e))!==null;)s.push((n[1]??"").trim());return s}function at(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}
